{% load i18n cache cache_page static settings internationalization css_inline %}

{% with theme=request.session.theme %}
    <!DOCTYPE html>
    <html style="min-height: 100%" lang="{{ request.LANGUAGE_CODE }}">
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Snoweb{% endblock %}</title>
        <meta name="description"
              content="{% block description %}Choose and embed web-optimized SVGs in your HTML or with Django.{% endblock %}">
        <meta content="Snoweb" name="author">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/png" sizes="16x16"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-16x16.format-png.png">
        <link rel="icon" type="image/png" sizes="32x32"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-32x32.format-png.png">
        <link rel="icon" type="image/png" sizes="128x128"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-128x128.format-png.png">
        <link rel="icon" type="image/png" sizes="167x167"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-167x167.format-png.png">
        <link rel="icon" type="image/png" sizes="180x180"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-180x180.format-png.png">
        <link rel="apple-touch-icon"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-180x180.format-png.png">
        <link rel="icon" type="image/png" sizes="192x192"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-192x192.format-png.png">
        <link rel="icon" type="image/png" sizes="196x196"
              href="https://media.snoweb.fr/www/images/favicon_4vyLMhX.2e16d0ba.fill-196x196.format-png.png">
        <link rel="canonical" href="https://{{ request.get_host }}{{ request.path }}"/>
        {% get_available_languages as languages %}
        {% for lang_code, lang_name in languages %}
            {% with href=request|alternate_href:lang_code %}
                {% if lang_code == LANGUAGE_CODE %}
                    <link rel="alternate" hreflang="x-default" href="{{ href }}"/>
                {% endif %}
                <link rel="alternate" hreflang="{{ lang_code }}" href="{{ href }}">
            {% endwith %}
        {% endfor %}
        {% block css %}
            {% cache None settings.VERSION %}
                {% css_inline %}
                    {% with water_css="https://cdn.jsdelivr.net/npm/water.css@2/out/" %}
                        <link rel="stylesheet" href="{{ water_css }}{% if theme %}{{ theme }}{% else %}dark{% endif %}{% if not debug %}.min{% endif %}.css">
                    {% endwith %}
                    {% with href="snowebsvg/dist/css/themes-"|add:settings.VERSION|add:".css" %}
                        <link rel="stylesheet" href="{% static href %}">
                    {% endwith %}
                    {% with href="snowebsvg/dist/css/core-"|add:settings.VERSION|add:".css" %}
                        <link rel="stylesheet" href="{% static href %}">
                    {% endwith %}
                {% end_css_inline %}
            {% endcache %}
            <style>
                :root {
                {% if theme == 'light' %}
                    {% settings_by_key request 'theme_light_background_body' as background_body %}
                    {% settings_by_key request 'theme_light_primary' as primary %}
                    {% settings_by_key request 'theme_light_secondary' as secondary %}
                    {% settings_by_key request 'theme_light_tertiary' as tertiary %}
                {% else %}
                    {% settings_by_key request 'theme_dark_background_body' as background_body %}
                    {% settings_by_key request 'theme_dark_primary' as primary %}
                    {% settings_by_key request 'theme_dark_secondary' as secondary %}
                    {% settings_by_key request 'theme_dark_tertiary' as tertiary %}
                {% endif %}
                    --background-body: {{ background_body }};
                    --background: {{ tertiary }};
                    --background-alt: {{ tertiary }};
                    --selection: {{ secondary }};
                    --text-main: {{ primary }};
                    --text-bright: {{ primary }};
                    --text-muted: {{ primary }};
                    --links: {{ secondary }};
                    --focus: {{ secondary }};
                    --border: {{ tertiary }};
                    --code: gray;
                    --animation-duration: 0.1s;
                    --button-hover: {{ secondary }};
                    --scrollbar-thumb: {{ tertiary }};
                    --scrollbar-thumb-hover: {{ tertiary }};
                    --form-placeholder: {{ primary }};
                    --form-text: gray;
                    --variable: {{ secondary }};
                    --highlight: {{ secondary }};

                {% settings_by_key request 'theme_light_primary' as primary %}
                {% settings_by_key request 'theme_light_secondary' as secondary %}
                {% settings_by_key request 'theme_light_tertiary' as tertiary %}
                    --svg-theme-light-primary: {{ primary }};
                    --svg-theme-light-secondary: {{ secondary }};
                    --svg-theme-light-tertiary: {{ tertiary }};

                {% settings_by_key request 'theme_dark_primary' as primary %}
                {% settings_by_key request 'theme_dark_secondary' as secondary %}
                {% settings_by_key request 'theme_dark_tertiary' as tertiary %}
                    --svg-theme-dark-primary: {{ primary }};
                    --svg-theme-dark-secondary: {{ secondary }};
                    --svg-theme-dark-tertiary: {{ tertiary }};
                }
            </style>
        {% endblock %}
    </head>
    <body>

    <a href="{% url 'app:collection' %}">
        {% if theme == 'light' %}
            <img style="width: 200px" src="https://static.snoweb.fr/documents/logo-light.svg" alt="Logo Snoweb">
        {% else %}
            <img style="width: 200px" src="https://static.snoweb.fr/documents/logo-dark.svg" alt="Logo Snoweb">
        {% endif %}
    </a>
    <hr/>

    <div style="display: flex">
        <a href="{% url 'app:collection' %}">
            <button type="button">{% trans 'Home' %}</button>
        </a>
        <a href="{% url 'app:svg_search' %}">
            <button type="button">{% trans 'Search' %}</button>
        </a>
        <a href="{% url 'app:svg_settings' %}">
            <button type="button">{% trans 'Settings' %}</button>
        </a>
    </div>

    {% cache_page request %}{% block body %}{% endblock %}{% endcache_page %}
    {% block body_no_cache %}{% endblock %}

    <hr/>

    <p>{% trans 'Related links' %} :</p>
    <ul>
        <li><a href="https://snoweb-svg.readthedocs.io/en/latest/?badge=latest">{% trans 'Documentation' %}</a></li>
        <li><a href="https://github.com/Aleksi44/snoweb-svg">Github</a></li>
        <li><a href="https://pypi.org/project/snowebsvg/">PyPI</a></li>
    </ul>

    <small>{% trans 'Made with ‚ù§' %} | <a href="https://www.snoweb.fr/">Snoweb</a></small>

    </body>
    </html>
{% endwith %}